/* Clean cinematic layout for single front image with explicit stacking */

/* -------------- base -------------- */
.homepage {
  min-height: 100vh;
  position: relative;
  overflow: hidden;
  background: radial-gradient(circle at 50% 40%, #222 0%, #0b0b0b 60%);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* keep app container stacking context higher than body canvases */
.app-container,
.homepage {
  position: relative;
  z-index: 50; /* base stacking context for app content */
}

/* -------------- background layer (lowest) -------------- */
.background-layer {
  position: absolute;
  inset: 0;
  z-index: 10; /* below shader and samurai */
  pointer-events: none;
}
.red-glow {
  position: absolute;
  width: 50vmin;
  height: 50vmin;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 28, 28, 0.28) 0%, rgba(255, 28, 28, 0.06) 30%, rgba(0,0,0,0) 70%);
  filter: blur(80px);
  transform: translateY(-5vmin);
  z-index: 10;
  mix-blend-mode: screen;
}

/* -------------- SamuraiScene shader base (under the samurai image) -------------- */
.samurai-scene {
  position: absolute;
  left: 50%;
  top: 62%; /* place slightly below center where feet would be */
  transform: translate(-50%, -50%);
  width: 58vmin;
  height: 18vmin;
  z-index: 20; /* under the samurai image (30) */
  pointer-events: none;
  display: block;
  will-change: transform, opacity;
}

/* Canvas inside SamuraiScene is full of its element; style kept minimal */
.samurai-scene canvas {
  width: 100%;
  height: 100%;
  display: block;
}

/* -------------- Samurai image (above shader) -------------- */
.front-container {
  position: relative;
  z-index: 30; /* samurai picture on top of shader */
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

.front-card {
  position: relative;
  display: inline-block;
  pointer-events: none;
}

/* main image */
.front {
  height: 82vh;
  object-fit: contain;
  transform-origin: center bottom;
  filter: drop-shadow(0 0 28px rgba(255, 28, 28, 0.4))
          drop-shadow(0 12px 40px rgba(0, 0, 0, 0.7));
  display: block;
}

/* subtle red reflection overlay */
.front-reflection {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    rgba(255, 28, 28, 0.08) 0%,
    rgba(255, 28, 28, 0.06) 15%,
    transparent 40%
  );
  mix-blend-mode: screen;
  filter: blur(8px);
  border-radius: 2px;
}

/* -------------- Mouse trail canvas (between top text and samurai) -------------- */
/* Note: MouseTrail appends a fixed canvas to body. We force it behind the samurai but above background. */
canvas[style*="position: fixed"] {
  z-index: 25 !important; /* sits between shader(20) and samurai(30) */
  pointer-events: none !important;
}

/* -------------- top text (highest) -------------- */
.top-text {
  position: absolute;
  top: 6vh;
  left: 6vw;
  z-index: 60; /* highest */
  pointer-events: none;
  text-align: left;
  filter: drop-shadow(0 6px 16px rgba(0,0,0,0.6));
  color: #fff;
}
.top-text .title {
  font-family: "Inter", system-ui, -apple-system, "Hiragino Kaku Gothic ProN", sans-serif;
  font-weight: 700;
  letter-spacing: 0.12em;
  font-size: 1rem;
  opacity: 0.95;
  margin-bottom: 6px;
}
.top-text .katakana {
  font-family: "Hiragino Kaku Gothic ProN", "Yu Gothic", "Noto Sans JP", serif;
  font-size: 3.8rem;
  color: rgba(255, 28, 28, 0.95);
  letter-spacing: 0.03em;
  transform: translateY(-8px);
  mix-blend-mode: screen;
  text-shadow: 0 8px 28px rgba(255,28,28,0.12);
}

/* breathing animation for the samurai image */
@keyframes breathe {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-1.5%) scale(1.025); }
}
.breathing {
  animation: breathe 5s ease-in-out infinite;
}

/* panel and menu content kept */
.panel-content {
  color: #ddd;
  line-height: 1.6;
  font-size: 1rem;
}

/* responsiveness */
@media (max-width: 800px) {
  .front { height: 68vh; }
  .red-glow { width: 72vmin; height: 72vmin; filter: blur(64px); }
  .samurai-scene { width: 80vmin; height: 20vmin; top: 68%; }
  .top-text .katakana { font-size: 3rem; }
}

/* reduced motion */
@media (prefers-reduced-motion: reduce) {
  .breathing { animation: none; }
}
